<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <link href="../css/cwrc.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="../css/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="../css/favicon.ico" type="image/x-icon" />
    <title>Query Modifiers</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" href="/">
            <img src="http://sparql.cwrc.ca/images/cwrclogo-vert-white.png" height="30" class="align-top" alt="CWRC Logo" /> CWRC Linked Data</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="/sparql">SPARQL Queries</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Preambles
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="../cwrc-preamble-EN.html">CWRC Ontology</a>
                        <a class="dropdown-item" href="../genre-preamble-EN.html">Genre Ontology</a>
                        <a class="dropdown-item" href="../ii-preamble-EN.html">II Ontology</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Specifications
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="../cwrc.html">CWRC Ontology</a>
                        <a class="dropdown-item" href="../genre.html">Genre Ontology</a>
                        <a class="dropdown-item" href="../ii.html">II Ontology</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Documentation
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="our-dataset.html">Our Dataset</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="sparql-query-guide.html">SPARQL Query Guide</a>
                        <a class="dropdown-item" href="intro-to-sparql.html">Intro to SPARQL</a>
                        <a class="dropdown-item" href="query-modifiers.html">Query Modifiers</a>
                        <a class="dropdown-item" href="sample-queries.html">Sample Queries</a>
                        <a class="dropdown-item" href="load-into-huviz.html">Load into HuViz</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="NavbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        About
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="cwrc.html">CWRC</a>
                        <a class="dropdown-item" href="linked-data.html">Linked Data</a>
                        <a class="dropdown-item" href="../our-team-EN.html">Our Team</a>
                        <a class="dropdown-item" href="https://github.com/cwrc/ontology">Github</a>
                    </div>
                </li>
            </ul>
            <span class="navbar-text">The Ontology of the Canadian Writing Research Collaboratory</span>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row">
            <nav class="col-xl-2 col-lg-3 col-md-12 d-none d-lg-block bg-light sidebar">
                <div class="sidebar-sticky">
                    <div class="sidebar-heading justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>Table of Contents</span>
                        <a class="d-flex align-items-center text-muted" href="#"></a>
                        <div id="toc">
                            <!-- Table of Contents -->
                        </div>
                    </div>
                </div>
            </nav>
            <main role="main" class="col-xl-10 col-lg-9 col-md-12 ml-sm-auto pt-3 px-4" data-spy="scroll" data-target="#toc">
                <h1>Query modifiers: Refining Your Search</h1>
                <p>SPARQL has many built-in keywords which can be used to refine your search. The table below provides a list of some of the main keywords
                    along with a brief description.</p>
                <h2>General Information about Query Modifiers</h2>
                <p>There are many more modifiers than those listed in the table below. More information about them can be found on the <a href="https://www.w3.org/TR/rdf-sparql-query/">W3 Schools SPARQL Documentation</a>, or in the <a href="https://en.wikibooks.org/wiki/SPARQL">SPARQL WikiBooks</a>.</p>
                <p>Many modifiers can take a number of different formats of parameters, such as regex (regular expression). More information about writing regex can be found in the <a href="https://en.wikibooks.org/wiki/SPARQL/Expressions_and_Functions#REGEX">SPARQL Wikibooks</a>, and on the <a href="https://www.w3.org/TR/xpath-functions/#regex-syntax">W3 Schools website</a>. Another website to help get used to writing regex is <a href="https://leaverou.github.io/regexplained/">Regex Explained</a>.</p>
                <p>Often data types need to be specified when using specific values as parameters for modifiers. There are a number of different datatypes, such as xsd:integer (a whole number), xsd:boolean (data that is either true or false), or xsd:decimal (a number with values after the decimal point). To specify these datatypes, use the format <value>^^xsd:datatype.</p>

                <p> For example, if we wanted to find people with dates of birth between Jan. 1 and Dec. 31, 1884, we would use a regex that specified that those values were dates:</p>
                <pre class="code">FILTER ((?birthDate >= '1844-01-01'^^xsd:date) && (?birthDate <= '1884-12-31' ^^xsd:date))</pre>
                <p>More information about the basic datatypes can be found on the <a href="https://www.w3.org/TR/xmlschema-2/#built-in-primitive-datatypes">W3 Schools XML Schema Pages</a>.</p>

                <h2>Query Modifiers</h2>
                <table class="table table-hover normal">
                    <thead>
                        <tr>
                            <th>Keyword</th>
                            <th>Purpose</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>FILTER</td>
                            <td>Filters results by a provided clause. You can filter by using a regex (regular expression) that will return true/false, a range of dates, the language of a label, and more.</td>
                            <td>
                              <pre class="code">SELECT ?name WHERE {
    ?person cwrc:hasBirthDate ?birthDate ;
            cwrc:hasGender cwrc:woman;
            rdfs:label ?name.
FILTER ((?birthDate >= '1900-01-01'^^xsd:date)) .
} </pre>
                              <p>Returns names of women with birthdates after January 1, 1900.</p>
                            </td>
                        </tr>
                        <tr>
                            <td>FILTER NOT EXISTS</td>
                            <td>Filters results, returning results which do not meet the provided clause.</td>
                            <td>
                              <pre class="code">SELECT ?name
WHERE {
    ?person cwrc:hasBirthDate ?birthDate ;
            cwrc:hasGender cwrc:woman;
            rdfs:label ?name.
FILTER NOT EXISTS {?person cwrc:hasBirthDate "1775-12-16"^^xsd:date}
}</pre>
                              <p>Returns names of women except for those with the birthday December 16, 1776 (Jane Austen).</p>
                            </td>
                        </tr>
                        <tr>
                            <td>OPTIONAL</td>
                            <td>Makes the specified criteria optional. If the object exists, it will be displayed in the results, but if not, the cell in the results will simply be empty.</td>
                            <td>
                              <pre class="code">SELECT ?name ?deathDate WHERE {
  ?person cwrc:hasGender cwrc:woman;
   rdfs:label ?name .
  OPTIONAL {?person cwrc:hasDeathDate ?deathDate}.
}</pre>
                              <p>Returns names of women and their date of death. If they do not have a date of death, their name will still be displayed, but the column for date of death will be empty for that row.</p>
                            </td>
                        </tr>
                        <tr>
                            <td>MINUS</td>
                            <td>Similar to FILTER NOT EXISTS; can be used to prevent certain objects from being included in the results.</td>
                            <td>
                              <pre class="code">SELECT ?name
WHERE {
  ?person cwrc:hasGender cwrc:woman .
  ?person rdfs:label ?name .
  MINUS {
    ?person rdfs:label "Askew, Anne".
  }.
} </pre>
                              <p>Returns names of women, except those named "Anne Askew".</p>
                            </td>
                        </tr>
                        <tr>
                            <td>OFFSET</td>
                            <td>Skips the first number of rows specified by offset.</td>
                            <td>
                              <pre class="code">SELECT ?name
WHERE {
  ?person cwrc:hasGender cwrc:woman .
  ?person rdfs:label ?name .

}OFFSET 10</pre>
                              <p>Returns names of women, starting at the eleventh name.</p>
                            </td>
                        </tr>
                        <tr>
                            <td>LIMIT</td>
                            <td>Limits the number of results returned.</td>
                            <td>
                              <pre class="code">SELECT ?name 
WHERE { 
    ?person cwrc:hasGender cwrc:woman .
    ?person rdfs:label ?name .
}LIMIT 10</pre>
                              <p>Returns the first ten names of women.</p>
                            </td>
                        </tr>
                        <tr>
                            <td>VALUES</td>
                            <td>Allows for more than one match to the criteria.</td>
                            <td>
                              <pre class="code">SELECT ?name ?birthDate
WHERE {
    VALUES ?name {"Anne" "Mary"}
  ?person cwrc:hasBirthDate ?birthDate.

}</pre>
                              <p>Returns names of women, these names can either be Anne or Mary.</p>
                            </td>
                        </tr>
                        <tr>
                            <td>ORDER BY</td>
                            <td>Sorts the data by the values specified. Default is ascending order, unless otherwise specified.</td>
                            <td>
                              <pre class="code">SELECT ?name ?birthDate
WHERE {
    ?person cwrc:hasBirthDate ?birthDate.
    ?person rdfs:label ?name .

}ORDER BY ?birthDate</pre>
                              <p>Returns names of women, ordered by their date of birth.</p>
                            </td>
                        </tr>
                        <tr>
                            <td>GROUP BY</td>
                            <td>Groups the results together according to specified criteria. After grouping results, you can then perform functions on these groups, such as COUNT(), AVG(), SUM(), MIN(), and MAX(). More information on aggregate functions can be found here.</td>
                            <td>
                              <pre class="code">SELECT ?occupation (COUNT(?person) AS ?numPerProf)
WHERE {
    ?person cwrc:hasGender cwrc:woman;
        cwrc:hasOccupation ?occupation.
}
GROUP BY ?occupation</pre>
                              <p>Returns occupations of women in CRWC. The query first finds all the women with occupations, groups them by their occupations (using GROUP BY), and then counts the number of people in each group. These counts will be displayed in the results table in a column labeled "numPerProf", the number of people in each profession.</p>
                            </td>
                        </tr>
                        <tr>
                            <td>GRAPH</td>
                            <td>Specifies which graph data will be retrieved from.</td>
                        </tr>
                        <tr>
                            <td>UNION</td>
                            <td>Allows for grouping of different results, as well as combining multiple graph patterns so that one of several may match.</td>
                            <td>
                            </td>
                        </tr>
                    </tbody>
                </table>


            </main>
        </div>
    </div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js" integrity="sha384-feJI7QwhOS+hwpX2zkaeJQjeiwlhOP+SdQDqhgvvo1DsjtiSQByFdThsxO669S2D" crossorigin="anonymous"></script>
    <script src="../js/toc.js"></script>
    <script>
    var options = {
        selector: 'h2, h3, h4',
        scope: 'main'
    };

    var container = document.querySelector('#toc');
    var toc = initTOC(options);
    container.appendChild(toc);
    </script>
</body>

</html>
